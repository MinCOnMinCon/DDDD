# 🎮 DDDD : Dice Died During Dawn
## 목차
0. 게임 실행
1. 개요
2. 게임 규칙
3. 게임 화면 
4. 족보 
5. 코드 구조
6. 느낀 점
7. 리소스 및 라이센스
## 0. 게임 실행
1. 폴더 중 **"GameExecution"** 을 다운로드합니다.  
2. 내부 파일 중 **"DDDD.exe"** 을 실행합니다.
## 1. 개요
**주사위**를 굴리고 나온 눈으로 **족보**를 활성화하여 적을 처치하는 **덱빌딩 로그라이크** 게임입니다!
## 2. 게임 규칙 - 전투 진행
### 2-0. 적의 행동 예고
- 적이 자신이 할 행동을 예고합니다. 간혹 이 타이밍에 공격하는 적도 존재합니다.
### 2-1. 주사위 굴리기
- 가진 모든 **주사위**를 굴려 결과를 얻습니다. 각 결과에 대한 **보상**은 다음과 같습니다.


| 주사위 눈 1 | 주사위 눈 2| 주사위 눈 3 |
| --- | --- | --- |
| **패널티 주사위** + 1, 공격수치 + 2, 방어수치 +2  | 방어 수치 + 2 | 방어 수치 + 3 |

 | 주사위 눈 4 | 주사위 눈 5 | 주사위 눈 6| 
| --- | --- | --- |
| 공격수치 + 4  | 공격 수치 + 5 | **운명 토큰**  + 1 |

- **패널티 주사위**는 주사위를 굴릴 때 같이 굴리며, 나온 눈을 비활성화합니다.  
예시 : 패널티 주사위 2가 3개 나왔다. => 주사위를 굴려 나온 2 3개 비활성화 (없으면 아무런 영향 X)
- **운명 토큰**은 주사위를 굴린 후에 사용하며 운명 토큰 필드에 사용할 개수를 적고 엔터를 누르면 사용합니다.  
사용할 운명 토큰이 없다면 토큰 필드를 누르고 아무것도 입력 안하거나, 가지고 있는 개수보다 많이 적으면 넘어갑니다.
### 2-2. 족보 적용  
- 주사위를 굴리고 나고 운명 토큰까지 사용 후, 그 결과에 따라 **족보**를 활성화합니다.  
- 족보의 종류는 다음과 같습니다.  
**서브, 즉발, 수치비례, 수치조건**
- 서브 : **운명 토큰 사용 전**에 활성화되는 족보입니다.  
특정 주사위 눈의 개수가 일정 이상일 때 주사위를 추가하는 족보입니다.
- 즉발 : **남은 세 유형 중 가장 빨리 활성화 되는 족보**입니다.  
서브와 비슷하게 주사위 눈의 개수를 조건으로 활성화 되는 족보입니다.
- 수치비례 : **주사위 눈이 아닌 특정 수치에 비례**한 효과를 주는 족보입니다.  
- 수치조건 : **특정 수치에 따라 활성화**되는 족보입니다. 
### 2-3. 공격과 방어
- 여태까지 모은 공격 수치와 방어 수치로 적과 공방을 진행합니다.
- 당신의 공격이 **먼저** 실행되고 그 다음의 적의 공격이 실행됩니다.
- 받는 데미지는 **상대의 공격 수치 - 자신의 방어 수치**입니다.  

최종적으로 전투는 이렇게 진행됩니다.
1. 적의 행동 예고
2. 주사위 굴림 + 패널티 주사위 굴림
3. 서브 족보 활성화
4. 운명 토큰 사용 개수 결정
5. 즉발 족보 활성화
6. 수치비례 족보 활성화
7. 수치조건 족보 활성화
8. 당신의 공격
9. 적의 공격
## 3. 게임 화면
![title](https://github.com/user-attachments/assets/4bdaf644-1e63-4e79-b319-f55ba3c677d0)   
게임 시작화면  
: start를 누르면 시작합니다.  
![title](https://github.com/user-attachments/assets/cadbe3fe-c45a-4e64-8949-1852e9fa3bad)   
스토리
: Next를 눌러 다음 텍스트를 읽습니다.  
![title](https://github.com/user-attachments/assets/daa77a2c-1e67-40af-936d-cc3367ab8967)  
![title](https://github.com/user-attachments/assets/d6efa642-e4e3-4a86-b9fb-577b3c908458)   
게임 화면  
- 주사위 버튼 : 주사위를 굴려서 주사위 눈의 결과를 얻습니다.
- 주사위 결과UI : 주사위를 굴린 결과와 패널티 주사위의 결과, 족보의 결과 등 주사위 눈 관련 결과를 보여줍니다.  
- 운명 토큰 필드 : 몇개의 운명토큰을 사용할지 입력하는 필드입니다. 사용하지 않는다면 필드를 클릭하고 enter를 누릅니다.  
- 족보 UI : 현재 자신이 가지고 있는 족보를 나타냅니다. 활성화 된 족보는 노란색으로 하이라이트 됩니다.
- 적 : 당신이 처치해야 할 적입니다. 적은 각각의 공격 패턴이 있습니다. 로그 UI에서 적의 행동을 확인할 수 있습니다.  
- 운명토큰,패널티 주사위 UI : 현재 가지고 있는 패널티 주사위 수와 운명토큰의 수를 나타냅니다.
- 공격 수치, 방어수치 UI : 당신의 현재 공격 수치와 방어 수치를 나타냅니다. 공격 수치 게이지는 (당신의 공격 수치 / 적 현재 체력)으로 나타납니다. 방어 수치 게이지는 (당신의 방어 수치 / 당신의 현재 체력)으로 나타납니다.
- 플레이어 체력 : 당신의 현재 체력을 나타냅니다.
- 총 주사위 수, 현재 턴 주사위 수 : 당신이 가지고 있는 총 주사위 수와 지금 턴에 가지고 있는 추가적인 주사위 수를 나타냅니다.
- 로그 UI : 당신의 행동, 적의 행동, 받은 피해, 적의 체력, 보상 등 현재 흘러가는 상황에 대해 서술합니다.
- 툴팁 UI : 족보에 마우스를 올리면 족보에 대한 정보가 나타납니다. 두번째 줄에는 조건이, 세번째 줄에는 효과가 써져있습니다.   

![title](https://github.com/user-attachments/assets/5917903f-981e-406c-b6e2-cd461e3d59f6)   
전투 종료 : 전투가 끝나고 무작위로 두 개의 족보를 보상으로 받습니다. 6초 후에 자동으로 다음 스토리로 넘어갑니다.  
![title](https://github.com/user-attachments/assets/2f721d91-fb44-4a66-9d8c-02a85ce13734)   
![title](https://github.com/user-attachments/assets/b3e0ae90-3d90-4e93-aa7e-9e65a9ac48b8)   
게임 종료 : 당신이 죽거나, 모든 적을 처치하면 게임 종료 화면으로 넘어갑니다. 게임 종료시 Replay를 눌러 처음부터 다시 진행할 수 있습니다.
## 4. 족보  
- 서브

| 번호 | 보조 족보 이름 | 발동 조건 | 효과 |
| --- | --- | --- | --- |
| 1 | 최선의 방어는.. | 2가 두개 / 3이 두개 | 4 1개 추가 / 5 1개 추가 |
| 2 | 공격적 방어 | 4가 두개 / 5가 두개 | 2 1개 추가 / 3 1개 추가 |
| 3 | 파멸적 운명 | 1이 3개 | 6 1개 추가 후, 운명 토큰 획득 |
| 4 | 끝없는 파멸 | 1이 2개 | 패널티 주사위 즉시 1개 추가 |
| 5 | 요새 | 2가 두개 / 3이 두개 | 2 1개 추가 / 3 1개 추가 |
| 6 | 앙 가르드 | 4가 두개 / 5가 두개 | 4 1개 추가 / 5 1개 추가 |

- 즉발

| 번호 | 족보 이름 | 발동 조건 | 효과 | 시너지 유형 |
| --- | --- | --- | --- | --- |
| **7** | 예언의 서막 | 2 주사위 ≥2 | 적에게 예언 +2, 방어 +2 | 자원/유틸리티, 방어 |
| **8** | 운명의 스트레이트 | 1~5 각각 1개 이상 | 운명 토큰 3개 획득 | 자원/유틸리티 |
| **9** | 패널티 소멸 | 패널티 ≥2 | 패널티 2개 삭제, 체력 +5 | 패널티 조작, 회복 |
| **10** | 도박사의 보상 | 2·4·6 각각 ≥1 | 주사위 +1, 공격 +5, 방어 +5 | 자원/공격/방어 |
| **11** | 순환하는 운명 | 6 주사위 ≥2 | 운명 토큰 1개 획득 | 자원/유틸리티 |
| **12** | 운명의 제어 | 운명 토큰 ≥3 | 운명 토큰 1개 소모 → 공격+7, 방어+7 | 자원 + 공격/방어 |
| **13** | 전광석화 | 4·5 총합 ≥3 | 공격 횟수 +1 | 공격/공격 횟수 |
| **14** | 무력 증강 | 5 주사위 ≥3 | (5 개수 × 5) 공격 증가 | 공격 |
| **15** | 광전사 | 5 ≥1 & 1 ≥2 | 공격 횟수 +2, 패널티 +2 | 공격 + 패널티 |
| **17** | 연격 | 4·5 총합 ≥4 | (4,5총합 ÷3) 공격 횟수 증가 | 공격/공격 횟수 |
| **18** | 둠해머 | 패널티 ≥3 | 공격 횟수 +2, 패널티 -2 | 공격 + 패널티 |
| **19** | 파멸 | 패널티 ≥6 | 공격 +70, 패널티 -5 | 공격 + 패널티 |
| **20** | 현실 왜곡 | 2·3 총합 ≥4 | 적 예언+5, 이번 턴 주사위 +1 | 자원/유틸리티 |
| **36** | 행운의 가속  | 6 ≥4 | 주사위 +2 | 자원 |
| **37** | 다이스의 연금술  | 2~5 각각 ≥1 | 공격+9, 방어+9 | 공격/방어 |

- 수치 비례

| 번호 | 족보 이름 | 발동 조건 | 효과 | 유형 |
| --- | --- | --- | --- | --- |
| **16** | 철갑무사 | 4 ≥2 & 3 ≥1 | (공격 횟수 × 4) 방어 획득 | 방어 |
| **24** | 피의 연회 | 패널티 3 + 2·3 ≥1 | 공격의 20% 체력 회복 | 회복/패널티 |
| **25** | 파상 공세 | 4 ≥3 | (공격 ÷8) 만큼 공격 횟수 증가 | 공격/횟수 |
| **26** | 흡수 타격 | 3·4 각각 1개 | 공격 횟수 ×4 체력 회복 | 회복 |
| **27** | 고통의 예언 | 4·5 각각 1개 | 공격의 10% 예언 부여 | 자원/공격 |
| **28** | 신속의 예언 | 3·4·5 각각 1개 | 공격 횟수 ×2 예언 | 자원/공격 |
| **21** | 자기 실현적 예언 | 6 ≥3 + 패널티 ≥2 | 운명→패널티 변환, 변환당 공격+3 | 패널티/공격 |
| **22** | 속죄의 폭풍 | 패널티 ≥3 + 4,5 ≥1  | 공격 = 패널티 × 5, 패널티 -1 | 공격/패널티 |

- 수치 조건  

| 번호 | 족보 이름 | 발동 조건 | 효과 | 유형 |
| --- | --- | --- | --- | --- |
| **29** | 운명 조작 | 예언 ≥6 + 6 눈 ≥1 | 운명 토큰 +1, 방어 +5 | 자원/방어 |
| **30** | 치유의 징조 | 예언 ≥9 + 2 ≥1 | 체력 +7, 방어 +6 | 자원/방어 |
| **31** | 예지된 방어 | 예언 ≥10 + 3 ≥1 | 방어 +15 | 방어 |
| **32** | 예언 폭발 | 예언 ≥11 + 1 ≥1 | 예언 * 2만큼 공격 수치 획득 | 자원/유틸리티 |
| **33** | 예언 : 죽음 | 예언 ≥15 + 4 또는 5 ≥2 | 적 예언 초기화, 공격+40 | 공격/유틸리티 |
| **34** | 속전속결 | 최종 공격 횟수 ≥4 | 공격 +10 | 공격/횟수 |


- 서브 족보들을 제외한 나머지 족보들을 **테마**를 가지고 있습니다.  
- **패널티 주사위 테마**(주사위 눈 1)  
: 패널티 주사위를 소모해 많은 공격 수치를 얻는 등의 공격에 치중된 테마입니다.  
패널티 주사위가 많을 수록 더 강력한 공격을 할 수 있지만 방어에는 약합니다.
- **예언 테마**(주사위 눈 2,3)  
: 고유 수치인 예언을 이용해 족보를 발동시킵니다.  
특정 족보로 적에게 예언 수치를 쌓고 일정 수치 이상이면 강력한 효과를 발동시킬 수 있습니다.  
그러나, 예언 수치가 쌓이지 않으면 무력합니다.  
- **연공 테마**(주사위 눈 4,5)  
: 공격 횟수를 늘리고 늘어난 공격 횟수에 따라 여러 이득을 얻을 수 있습니다.  
그냥 공격 횟수를 늘리는 족보도 있지만, 자신의 공격 수치에 비례해 공격 횟수를 늘릴 수 있습니다.  
- **운명 테마**(주사위 눈 6)  
 : 운명 토큰을 이용해 다양한 주사위 눈을 얻고 이를 조건으로 강력한 효과를 발동시키는 족보입니다.  
 운명 토큰을 획득하거나 주사위를 추가하는 효과가 있어 보조로 활용하기 좋습니다.  

## 5. 코드 구조   
![title](https://github.com/user-attachments/assets/9f81627e-b3c8-4736-a881-84f2504a20f9)  
( 대략적인 코드 구조 입니다.)  
- Creature : Player와 Monster가 상속하는 부모 클래스 입니다. 둘의 공통되는 함수나 변수는 여기에 포함시켰습니다. 
- Player : 플레이어는 전체적으로 하는 일이 좀 많았습니다. UI 업데이트 함수 호출, 적과의 전투 진행 함수등 가지고 있는 함수나, 연관되어있는 스크립트가 매우 많습니다. 이후 Player 내부의 역할을 나누는 식의 리팩토링을 진행할 계획입니다.
- Monster : 지금은 실제 적들을 이 Monster 클래스를 상속해서 구현했지만 (적의 수가 적어서 문제는 없었습니다.), 나중에 확장성을 고려해서 Monster를 스크립터블 오브젝트로 만들어 적의 수가 늘어나면 관리하기 편하게 만들 생각입니다.  
- HandManager : 족보를 추가, 삭제, 관리하는 클래스입니다. 그나마 이 클래스는 Player한테 분리해서 좀 나았습니다. 
- Hands : 가장 문제가 있던 클래스였습니다. 각 족보를 나타내야 하는 클래슨데 이전에는 이걸 족보 하나당 클래스 하나씩 만들어서 대략 37개쯤의 스크립트가 있었습니다. 이건 수정 사항이 생기면 다 수정해야되서 스크립터블 오브젝트로 리팩토링해 지금은 다행히 하나의 스크립트로 구현했습니다.  
- UIManager : 개발 시간의 단축을 위해 씬을 만들지 않고 스토리 UI, 전투 UI, 게임오버 UI, 시작 UI로 나눠서  특정 상황일 때, 그에 맞는 UI를 띄우는 식으로 구현했습니다. 이 일을 하는 게 바로 이 클래스 입니다.  
그러나, 상황이 바뀔 때, Player나 Monster의 값을 변경하거나 함수를 호출하는 경우가 생겨 그 일까지 하게 되버렸습니다. 이것도 UI를 변경해주는 클래스랑 상황 변화에 맞게 값이나 함수 업데이트를 하는 클래스로 나눌 생각입니다.  
- MonsterManager, PlayerManager : UIManager가 몬스터나 플레이어 클래스의 변수를 조정하거나 함수를 호출하기 위해 만들어 놓은 중간 클래스 입니다. 
# 6. 느낀 점 
- 처음으로 이렇게 커다란 프로젝트를 만들다 보니 문제점이 많았습니다.
  - 작은 프로젝트를 할 때는 얼추 전체 구조가 보이고 함수나 변수가 다 기억이 났었는데,  
규모가 하도 크다 보니깐 전체 구조도 이상해지고 간혹 만든 함수나 변수를 잊어버리는 경우가 있었습니다... 
  - 가장 크게 느낀 구조 문제는 클래스의 독립성이였습니다.  
예전에는 규모가 작으니 클래스가 다른 클래스와 크게 묶여있어도 문제가 없었습니다.  
여기서는 묶여있는 몇몇 클래스 중에 하나의 클래스를 고치니 다른 클래스에 버그가 생기는 경우가 매우 많았습니다. 그걸 보면서 왜 클래스의 단일 책임이 중요해지는지 깨닫게 되는 순간이었습니다.  
  - 또한, 다른 클래스 간에 연결을 할 때는 중간 클래스가 있다는 게 중요하다는 걸 알았습니다.  
위에서도 언급했듯이, 클래스끼리 과하게 연결되어있으면 하나를 바꾸면 다른 하나에서 문제가 일어나는 상황이 많았습니다.  
그러나 중간에 중개하는 클래스가 있는 다른 클래스들은 확실히 한 클래스에 추가해도 중간에서 완화가 되니 다른 클래스에 영향이 훨씬 덜 해 시간을 아낄 수 있었습니다.  
- 유니티 기능에 대해서도 배운 게 많았습니다.  
   - 이번에 턴제를 만들면서 UI를 정말 많이 쓰게 되었는데, 덕분에 UI 크기나 무슨 UI가 있는지 알게 되는 경험이었습니다.  
   - 족보를 만들면서 스크립터블 오브젝트의 소중함을 깊게 깨닫게 되었습니다.  
  - 턴제로 만들다 보니 이외에도 싱글톤 형식이나, 이벤트-리스너 구조에 대해 배울 수 있었습니다.  

# 7. 리소스 및 라이센스
- **글씨체** : 갈무리체
https://quiple.dev/galmuri  
라이선스
© 2019–2025 Lee Minseo (quiple@quiple.dev)  
Galmuri는 SIL 오픈 폰트 라이선스 1.1에 따라 사용할 수 있으며, 폰트가 자체적으로 판매되지 않는 한 자유롭게 사용·연구·수정·재배포할 수 있습니다.  
OFL 1.1을 한국어로 번역한 내용은 이곳에서 확인할 수 있으며, 라이선스 원문은 이곳에서 확인할 수 있습니다.  
- **적 이미지** :  PixVerse를 통한 이미지 생성  
생성 이미지 사용에 관련된 이용 약관  
https://docs.pixverse.ai/Terms-of-Service-5a019460172240b09bc101b7a12fafea   
<details><summary>일부 발췌  
</summary>
You can download information presented on this website with regard to our products and services, provided that: - aid information is can be used for both personal and commercial purposes. - No alterations of any kind are made to said information. - No further statements and warranties shall be made with regard to said information or documents containing said information. - No statements and/or notifications indicating our ownership of and other legal rights and interests with regard to said information shall be removed, in part or in full.
</details>

- **배경 이미지** : ChatGPT를 통한 이미지 생성  
생성 이미지 사용에 관련된 이용 약관   
https://openai.com/ko-KR/policies/row-terms-of-use/?utm_source=chatgpt.com

<details><summary>일부 발췌
</summary>
귀하의 콘텐츠. 귀하는 본 서비스에 인풋(“인풋”)을 제공할 수 있고 이를 바탕으로 본 서비스로부터 아웃풋(“아웃풋”)을 수령할 수 있습니다. 인풋과 아웃풋을 총칭하여 “콘텐츠”라고 합니다. 귀하의 콘텐츠가 관련 법률 또는 본 약관을 위반하지 않게 하는 등 콘텐츠에 대한 책임은 귀하에게 있습니다. 귀하는 본 서비스에 인풋을 제공하는데 필요한 모든 권리, 면허 및 허가를 보유하고 있음을 진술 보장합니다.

콘텐츠 소유권. 관련 법률상 허용되는 한도 내에서, 귀하와 OpenAI 중 귀하가 (a) 인풋에 대한 귀하의 소유권을 유지하고 (b) 아웃풋을 소유합니다. 당사는 아웃풋에 대한 당사의 권리, 소유권 및 이권이 있다면 그 모두 이로써 귀하에게 양도합니다. 
</details>










